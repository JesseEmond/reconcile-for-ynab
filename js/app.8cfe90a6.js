(function(t){function e(e){for(var a,c,o=e[0],i=e[1],l=e[2],d=0,m=[];d<o.length;d++)c=o[d],Object.prototype.hasOwnProperty.call(s,c)&&s[c]&&m.push(s[c][0]),s[c]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);u&&u(e);while(m.length)m.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,o=1;o<n.length;o++){var i=n[o];0!==s[i]&&(a=!1)}a&&(r.splice(e--,1),t=c(c.s=n[0]))}return t}var a={},s={app:0},r=[];function c(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=a,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(n,a,function(e){return t[e]}.bind(null,a));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/reconcile-for-ynab/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],i=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=i;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"1c1e":function(t,e,n){},2377:function(t,e,n){},"244b":function(t,e,n){},"35d1":function(t,e,n){},3675:function(t,e,n){},"3e65":function(t,e,n){},5316:function(t,e,n){"use strict";n("244b")},"56d7":function(t,e,n){"use strict";n.r(e);var a=n("2b0e"),s=n("43f9"),r=n.n(s),c=(n("51de"),n("e094"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-container"},[e("md-app",{attrs:{"md-mode":"fixed",id:"app"}},[e("md-app-toolbar",{staticClass:"md-primary"},[e("span",{staticClass:"md-title",on:{click:t.onHeaderClick}},[t._v("Reconcile for YNAB")]),t.store.isLoggedIn()?e("div",{staticClass:"md-toolbar-section-end"},[e("md-button",{staticClass:"md-icon-button",on:{click:t.refresh}},[e("md-icon",[t._v("refresh")])],1),e("md-menu",{attrs:{"md-size":"small"}},[e("md-button",{staticClass:"md-icon-button",attrs:{"md-menu-trigger":""}},[e("md-icon",[t._v("more_vert")])],1),e("md-menu-content",[e("md-menu-item",{on:{click:t.logout}},[t._v("Logout")])],1)],1)],1):t._e()]),e("md-app-content",{staticClass:"md-layout"},[e("div",{staticClass:"md-layout-item md-size-25 md-small-hide"}),e("div",{staticClass:"md-layout-item md-size-50 md-small-size-100"},[e("router-view",{attrs:{store:t.store}})],1),e("md-snackbar",{staticClass:"error",attrs:{"md-duration":1/0,"md-active":t.store.state.showError},on:{"update:mdActive":function(e){return t.$set(t.store.state,"showError",e)},"update:md-active":function(e){return t.$set(t.store.state,"showError",e)}}},[e("span",[t._v("Error encountered. "+t._s(t.store.state.error))]),t.store.state.errorRetryFn?e("md-button",{staticClass:"md-accent",on:{click:t.errorRetry}},[t._v("Retry")]):e("md-button",{staticClass:"md-accent",on:{click:t.dismissError}},[t._v("Dismiss")])],1)],1)],1)],1)}),o=[];n("14d9"),n("d9e2");class i{constructor(t){this.last_knowledge=-1,this.items=[],this.verbose=t||!1}processDelta(t,e){this.verbose&&console.info(`Processing a delta of ${t.length}, knowledge ${this.last_knowledge}->${e}`),this.last_knowledge=e;for(const n of t){const t=this.items.findIndex(t=>t.id==n.id);t<0?this.items.push(n):this.items.splice(t,1,n)}}}let l=new i;function u(t){t.transactions=null,t.error=""}async function d(t){const e=await m(t),n=e.filter(t=>t.on_budget),a=e.filter(t=>!t.on_budget);return{budget:n,tracking:a}}async function m(t){const e=await f(t);return e.filter(t=>!t.closed&&!t.deleted)}async function f(t){try{const e=await t.accounts.getAccounts("default",l.last_knowledge);return e.data.accounts.forEach(u),l.processDelta(e.data.accounts,e.data.server_knowledge),l.items}catch(e){const t=e.error.detail;throw Error("Error while fetching accounts from YNAB: "+t)}}async function h(t,e){try{const n=await t.accounts.getAccountById("default",e),a=n.data.account;return u(a),l.processDelta([a],l.last_knowledge),a}catch(n){const t=n.error.detail;throw Error("Error while fetching account from YNAB: "+t)}}var g={getOpenAccountsByType:d,getAccountById:h};async function p(t){try{const e=await t.budgets.getBudgetSettingsById("default");return e.data.settings}catch(e){const t=e.error.detail;throw Error("Error while fetching budget settings from YNAB: "+t)}}function y(){return"en-US"}var b={getSettings:p,getLocale:y};let v=new i;async function _(t){try{const e=await t.categories.getCategories("default",v.last_knowledge);return v.processDelta(e.data.category_groups,e.data.server_knowledge),v.items}catch(e){const t=e.error.detail;throw Error("Error while fetching category groups from YNAB: "+t)}}async function w(t){const e=await _(t),n=e.find(t=>"Internal Master Category"==t.name);if(!n)throw Error("No 'Internal Master Category' found on groups: "+e.map(t=>t.name));const a=n.categories.find(t=>t.name.includes("Inflow"));if(!a)throw Error("No 'Inflow' found in categories: "+n.categories.map(t=>t.name));return a}var C={getInflowCategory:w};const k=n("d3c8");let A={},T=null;async function x(t,e){try{A[e]||(A[e]=new i);const n=await t.transactions.getTransactionsByAccount("default",e,void 0,void 0,A[e].last_knowledge);return A[e].processDelta(n.data.transactions,n.data.server_knowledge),A[e].items}catch(n){const t=n.error.detail;throw Error("Error while getting transactions for account, details: "+t)}}async function O(t,e){const n=await x(t,e),a=n.filter(t=>t.approved&&!t.deleted),s=a.filter(t=>"cleared"==t.cleared),r=a.filter(t=>"uncleared"==t.cleared);return{cleared:s,uncleared:r}}async function B(t){if(T)return T;try{const e=await C.getInflowCategory(t);return T=e.id,T}catch(e){return console.log("Failed to get inflow category ID. Will not set category on reconciliation. Error: "+e),null}}async function E(t,e,n){const a={account_id:e.id,date:k.utils.getCurrentDateInISOFormat(),cleared:"reconciled",amount:n,payee_name:"YNAB Reconcile: Adjustment",memo:"Entered automatically by YNAB Reconcile"};let s=await B(t);s&&(a.category_id=s);try{await t.transactions.createTransaction("default",{transaction:a})}catch(r){const t=r.error.detail;throw Error("Error while creating reconciliation transcation on YNAB: "+t)}}async function I(t,e,n,a){if(0!=a&&await E(t,e,a),n.length){const e=n.map(t=>({id:t.id,cleared:"reconciled"}));try{await t.transactions.updateTransactions("default",{transactions:e})}catch(s){const t=s.error.detail;throw Error("Error while reconciling transactions on YNAB: "+t)}}}var N={getAccountTransactionsByType:O,reconcile:I};const S=n("d3c8");function j(t,e,n){const a=new Date,s={value:e,expiry:a.getTime()+n};localStorage.setItem(t,JSON.stringify(s))}function L(t){const e=localStorage.getItem(t);if(!e)return null;const n=JSON.parse(e),a=new Date;return a.getTime()>n.expiry?(localStorage.removeItem(t),null):n.value}async function P(t,e){const{budget:n,tracking:a}=await g.getOpenAccountsByType(t);e.accounts.budget=n,e.accounts.tracking=a;const s=n.map(e=>R(t,e)).concat(a.map(e=>R(t,e)));await Promise.all(s)}async function R(t,e){try{const{cleared:n,uncleared:a}=await N.getAccountTransactionsByType(t,e.id);e.transactions={cleared:n,uncleared:a},e.error=""}catch(n){console.error(`Transactions loading failure for account ${e.id}. ${n.message}`),e.error="Failed to load transactions."}}async function Y(t,e,n){let a=e.accounts.budget,s=a.findIndex(t=>t.id==n);if(s<0&&(a=e.accounts.tracking,s=a.findIndex(t=>t.id==n),s<0))throw Error(`Account with ID ${n} not found.`);const r=await g.getAccountById(t,n);a.splice(s,1,r),await R(t,r)}var D={ynab:null,state:{accounts:{budget:[],tracking:[]},settings:null,accountsLoaded:!1,reconciling:!1,error:"",errorRetryFn:null,showError:!1},isLoggedIn(){return null!=L("access_token")},maybeFirstLoad:async function(){if(!this.ynab){const t=L("access_token");if(this.ynab=new S.API(t),await this.loadSettings(),this.state.error)return void(this.ynab=null);await this.reload()}},login(t){const e=72e5;j("access_token",t,e)},logout(){localStorage.removeItem("access_token")},loadSettings:async function(){let t=this;async function e(){try{t.state.settings=await b.getSettings(t.ynab),t.ok()}catch(n){t.error(n,e)}}await e()},reload:async function(){let t=this;async function e(){t.state.accountsLoaded=!1;try{await P(t.ynab,t.state),t.state.accountsLoaded=!0,t.ok()}catch(n){t.error(n,e)}}await e()},reconcile:async function(t,e,n){let a=this;async function s(){a.state.reconciling=!0;try{await N.reconcile(a.ynab,t,e,n),a.ok(),a.state.reconciling=!1;try{await Y(a.ynab,a.state,t.id)}catch(r){a.error(r)}}catch(r){a.error(r,s)}}await s()},error(t,e){this.state.showError=!0,this.state.error=t.message,this.state.errorRetryFn=e,console.log("Error details: ",t)},ok(){this.state.showError=!1,this.state.error="",this.state.errorRetryFn=null}},$={data(){return{store:D}},methods:{onHeaderClick(){this.$router.push("/")},logout(){this.store.logout(),this.$router.push("/login")},refresh(){this.store.reload()},errorRetry(){this.store.state.errorRetryFn()},dismissError(){this.store.ok()}}},F=$,V=(n("dba4"),n("ee08"),n("2877")),U=Object(V["a"])(F,c,o,!1,null,"b73602ec",null),z=U.exports,M=n("9483");Object(M["a"])("/reconcile-for-ynab/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var H=n("8c4f"),J=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[t.loaded?e("div",[e("account-list",{attrs:{accounts:t.budgetAccounts,"subheader-content":"Budget Accounts","no-accounts-content":"No budget accounts.","on-select":t.goToAccount,settings:t.settings}}),e("account-list",{attrs:{accounts:t.trackingAccounts,"subheader-content":"Tracking Accounts","no-accounts-content":"No tracking accounts.","on-select":t.goToAccount,settings:t.settings}})],1):t.error.length?e("div",{staticClass:"md-title loader-container"},[e("div",[e("md-icon",{staticClass:"md-size-4x md-accent"},[t._v("error")])],1),t._v(" Oops! Something went wrong. ")]):e("div",{staticClass:"loader-container"},[e("span",{staticClass:"md-title"},[t._v("Loading accounts...")]),e("md-progress-spinner",{attrs:{"md-mode":"indeterminate"}})],1)])},W=[],q=function(){var t=this,e=t._self._c;return e("md-list",{staticClass:"accounts-list"},[e("md-subheader",[t._v(t._s(t.subheaderContent))]),t._l(t.accounts,(function(n){return e("div",{key:n.key},[e("md-list-item",{attrs:{disabled:!!n.error},on:{click:function(e){return t.onSelect(n)}}},[e("account-summary",{attrs:{account:n,settings:t.settings}})],1),e("md-divider")],1)})),t.accounts.length?t._e():e("md-list-item",{staticClass:"empty-accounts-list"},[t._v(" "+t._s(t.noAccountsContent)+" ")])],2)},G=[],Z=function(){var t=this,e=t._self._c;return e("div",{staticClass:"md-list-item-content account-summary"},[e("md-content",{staticClass:"account-marker md-primary"}),e("div",{staticClass:"account-info"},[e("span",[t._v(t._s(t.account.name))]),e("div",{staticClass:"transactions-status"},[t.account.transactions||t.account.error?t._e():e("span",[t._v(" Loading... ")]),t.account.error?e("span",{staticClass:"error-state"},[e("md-icon",[t._v("error_outline")]),t._v(" "+t._s(t.account.error)+" ")],1):t.clearedTransactions.length?e("span",[e("span",{staticClass:"transaction-count"},[e("md-badge",{staticClass:"md-primary md-square",attrs:{"md-content":t.clearedTransactions.length}})],1),t._v(" unreconciled "+t._s(t.pluralize("transaction",t.clearedTransactions.length))+" ")]):t.unclearedTransactions.length?e("span",[t._v(" "+t._s(t.unclearedTransactions.length)+" uncleared "+t._s(t.pluralize("transaction",t.unclearedTransactions.length))+" ")]):e("span",{staticClass:"reconciled-state"},[t._v("Reconciled")])])]),e("div",{staticClass:"balance md-list-item-text"},[e("currency",{attrs:{"initial-value":t.balance,settings:t.settings}})],1),e("md-icon",[t._v("chevron_right")])],1)},Q=[],K=function(){var t=this,e=t._self._c;return e("span",{staticClass:"currency",class:{positive:t.value>=0,negative:t.value<0}},[t.editable?e("md-field",{staticClass:"currency-field",class:t.fieldClasses},[t.showLeftCurrency?e("span",{staticClass:"md-prefix"},[t._v(t._s(t.currencySymbol))]):t._e(),e("auto-width-input",{directives:[{name:"currency",rawName:"v-currency",value:t.currencyOptions,expression:"currencyOptions"}],staticClass:"currency-input",attrs:{id:"balance-input",autowidth:t.autowidth},on:{"md-field-classes":function(e){t.fieldClasses=e}},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),t.clearable?e("md-button",{staticClass:"md-icon-button md-dense",on:{click:t.onClear}},[e("md-icon",[t._v("clear")])],1):t._e(),t.showRightCurrency?e("span",{staticClass:"md-prefix"},[t._v(t._s(t.currencySymbol))]):t._e()],1):e("span",[t._v(t._s(t.formatValue(t.initialValue,!0)))])],1)},X=[],tt=function(){var t=this,e=t._self._c;return e("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"},{name:"autowidth",rawName:"v-autowidth",value:t.autowidth,expression:"autowidth"}],staticClass:"md-input md-has-value",attrs:{type:"text"},domProps:{value:t.text},on:{focus:function(e){t.focused=!0},blur:function(e){t.focused=!1},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.target.blur()},input:function(e){e.target.composing||(t.text=e.target.value)}}})},et=[],nt={name:"AutoWidthInput",props:{value:String,autowidth:Object},data(){return{model:"",focused:!1}},computed:{text:{get(){return this.model},set(t){this.model=t,this.$emit("input",t)}}},watch:{value:{handler(t){this.model=t},immediate:!0},focused:{handler(){this.updateClasses()},immediate:!0}},methods:{updateClasses(){let t=["md-has-value"];this.focused&&t.push("md-focused"),this.$emit("md-field-classes",t)}}},at=nt,st=Object(V["a"])(at,tt,et,!1,null,"40c33ce3",null),rt=st.exports,ct=n("d413");const ot=n("d3c8");function it(t,e){return ot.utils.convertMilliUnitsToCurrencyAmount(t,e)}var lt={name:"Currency",props:{initialValue:Number,settings:Object,editable:{type:Boolean,default:!1},autowidth:Object,clearable:{type:Boolean,default:!1}},components:{AutoWidthInput:rt},data(){return{rawText:"",currencyOptions:{currency:null,precision:this.settings.currency_format.decimal_digits,exportValueAsInteger:!0,distractionFree:!1,allowNegative:!0,autoDecimalMode:!0},fieldClasses:[]}},watch:{initialValue:{handler(t){this.text=this.formatValue(t,!1)},immediate:!0}},computed:{text:{get(){return this.rawText},set(t){this.rawText=t;const e=Object(ct["b"])(t,this.currencyOptions),n=1e3*e;this.$emit("update:value",n)}},value(){return Object(ct["b"])(this.text,this.currencyOptions)},showLeftCurrency(){return this.settings.currency_format.display_symbol&&this.settings.currency_format.symbol_first},showRightCurrency(){return this.settings.currency_format.display_symbol&&!this.settings.currency_format.symbol_first},currencySymbol(){return this.settings.currency_format.currency_symbol}},methods:{formatValue(t,e){const n=this.settings.currency_format.iso_code,a=this.settings.currency_format.decimal_digits,s=it(t,a);let r={};r=e&&this.settings.currency_format.display_symbol?{style:"currency",currency:n,currencyDisplay:"narrowSymbol"}:{style:"decimal",minimumFractionDigits:a};const c=new Intl.NumberFormat(b.getLocale(this.settings),r);return c.format(s)},onClear(){this.text=this.formatValue(this.initialValue,!1)}}},ut=lt,dt=(n("8f45"),Object(V["a"])(ut,K,X,!1,null,"8f8dc2d0",null)),mt=dt.exports,ft={name:"AccountSummary",props:{account:Object,settings:Object},components:{Currency:mt},computed:{balance(){return this.account.cleared_balance},clearedTransactions(){return this.account.transactions.cleared||[]},unclearedTransactions(){return this.account.transactions.uncleared||[]}},methods:{pluralize(t,e){return e>1?t+"s":t}}},ht=ft,gt=(n("adbb"),Object(V["a"])(ht,Z,Q,!1,null,"53869b06",null)),pt=gt.exports,yt={name:"AccountList",props:{accounts:Array,subheaderContent:String,noAccountsContent:String,onSelect:Function,settings:Object},components:{AccountSummary:pt}},bt=yt,vt=(n("9723"),Object(V["a"])(bt,q,G,!1,null,"385bedf2",null)),_t=vt.exports,wt={name:"Home",props:{store:Object},components:{AccountList:_t},computed:{error(){return this.store.state.error},loaded(){return this.store.state.accountsLoaded},budgetAccounts(){return this.store.state.accounts.budget},trackingAccounts(){return this.store.state.accounts.tracking},settings(){return this.store.state.settings}},methods:{goToAccount(t){t.error||this.$router.push({name:"Account",params:{id:t.id}})}}},Ct=wt,kt=(n("a6a5"),Object(V["a"])(Ct,J,W,!1,null,"1df79325",null)),At=kt.exports,Tt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"header"},[e("img",{staticClass:"icon",attrs:{src:"img/icons/android-chrome-192x192.png"}}),e("p",{staticClass:"md-title md-primary"},[t._v("Reconcile your accounts")]),e("md-button",{staticClass:"md-raised md-primary",attrs:{href:t.oauthUrl}},[t._v("Connect to YNAB")])],1),e("div",{staticClass:"details"},[e("p",{staticClass:"md-subheading"},[t._v(" Quickly bring your accounts up-to-date, even on mobile. Your data stays between your browser and YNAB. ")]),e("div",[e("router-link",{staticClass:"md-accent",attrs:{to:"/privacy"}},[t._v("Privacy policy")])],1)]),e("span",[t._v(" Made with "),e("md-icon",{staticClass:"md-accent"},[t._v("favorite")]),t._v(", code on "),e("a",{staticClass:"md-accent",attrs:{href:"https://github.com/JesseEmond/reconcile-for-ynab"}},[t._v("GitHub")])],1)])},xt=[];function Ot(){const t="7154e14f57f646adf749363b684aea1ff707ee87737a81b383863e5e8f26aec2";if(!t)throw Error("Client ID not configured. Make sure to include an env variable with name VUE_APP_YNAB_OAUTH_CLIENT_ID based on your YNAB OAuth configuration.");const e="https://jesseemond.github.io/reconcile-for-ynab/";if(!e)throw Error("Redirect URI not configured. Make sure to include an env variable with name VUE_APP_YNAB_OAUTH_REDIRECT_URI.");return`https://app.youneedabudget.com/oauth/authorize?client_id=${t}&redirect_uri=${e}&response_type=token`}function Bt(t){const e=/access_token=([^=&]+)/,n=e.exec(t);if(n){const t=n[1];return t}return!1}var Et={oauthPath:Ot,tryParseToken:Bt},It={name:"Login",props:{store:Object},computed:{oauthUrl(){return Et.oauthPath()}}},Nt=It,St=(n("8e87"),Object(V["a"])(Nt,Tt,xt,!1,null,"a8f3e43c",null)),jt=St.exports,Lt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("p",{staticClass:"account-name md-title"},[t._v(t._s(t.account.name))]),e("currency",{ref:"balance",staticClass:"balance",attrs:{id:"balance",editable:"","initial-value":t.initialBalance,autowidth:{maxWidth:"100%",minWidth:"100px",comfortZone:25},clearable:t.currentBalance!=t.serverBalance,settings:t.settings},on:{"update:value":function(e){t.currentBalance=e}}}),e("div",{style:{visibility:0!=t.reconciliationTransaction?"visible":"hidden"}},[e("md-icon",{staticClass:"md-accent"},[t._v("info")]),e("span",{staticClass:"md-subheading"},[t._v(" A reconciliation transaction of "),e("currency",{attrs:{initialValue:t.reconciliationTransaction,settings:t.settings}}),t._v(" will be created. ")],1)],1),e("div",{staticClass:"transactions"},[e("md-content",{staticClass:"transactions-list md-scrollbar md-elevation-4"},[t.transactions&&!t.submitting?e("div",[e("transaction-list",{attrs:{cleared:t.transactions.cleared,uncleared:t.transactions.uncleared,settings:t.settings},on:{selected:function(e){t.selectedTransactions=e}}})],1):t.submitting?e("div",{staticClass:"loader-container"},[e("span",{staticClass:"md-title"},[t._v("Reconciling...")]),e("md-progress-spinner",{attrs:{"md-mode":"indeterminate"}})],1):e("div",{staticClass:"loader-container"},[e("span",{staticClass:"md-title"},[t._v("Loading transactions...")]),e("md-progress-spinner",{attrs:{"md-mode":"indeterminate"}})],1)]),e("p",{staticClass:"txn-info-msg",style:{visibility:t.selectedTransactions.length?"visible":"hidden"}},[e("md-icon",{staticClass:"md-accent"},[t._v("info")]),e("span",{staticClass:"md-subheading"},[t._v(" "+t._s(t.selectedTransactions.length)+" "+t._s(t.pluralize("transaction",t.selectedTransactions.length))+" will be marked as reconciled "),t.selectedUnclearedTransactions.length>0?e("div",[t._v(" ("+t._s(this.selectedUnclearedTransactions.length)+" currently uncleared). ")]):t._e()])],1)],1),e("div",{staticClass:"actions-area"},[e("md-button",{attrs:{to:"/"}},[t._v("Cancel")]),e("span",[e("md-button",{staticClass:"md-raised md-primary",attrs:{disabled:!t.needsReconciliation},on:{click:t.reconcile}},[t._v(" Reconcile ")]),e("md-tooltip",[t._v(t._s(t.reconcileTooltip))])],1)],1)],1)},Pt=[],Rt=function(){var t=this,e=t._self._c;return e("div",[t.transactions.length?e("md-table",{attrs:{id:"transactions","md-card":"","md-selected-value":t.selected},on:{"update:mdSelectedValue":function(e){t.selected=e},"update:md-selected-value":function(e){t.selected=e}},scopedSlots:t._u([{key:"md-table-row",fn:function({item:n}){return e("md-table-row",{attrs:{"md-selectable":"multiple","md-auto-select":""}},[e("md-table-cell",{attrs:{"md-label":"Payee"}},[t._v(t._s(n.payee_name))]),e("md-table-cell",{attrs:{"md-label":"Date"}},[t._v(t._s(t.formatDate(n.date)))]),e("md-table-cell",{attrs:{"md-label":"Amount"}},[e("currency",{attrs:{initialValue:n.amount,settings:t.settings}})],1),e("md-table-cell",{class:{cleared:"cleared"==n.cleared},attrs:{"md-label":"Cleared"}},["cleared"==n.cleared?e("md-icon",{staticClass:"cleared-txn"},[t._v("check_circle")]):e("md-icon",{staticClass:"cleared-txn"},[t._v("cancel")])],1)],1)}}],null,!1,2081082693),model:{value:t.transactions,callback:function(e){t.transactions=e},expression:"transactions"}},[e("md-table-toolbar",[e("h1",{staticClass:"md-title"},[t._v("Transactions to reconcile")])])],1):e("md-empty-state",{staticClass:"md-primary",attrs:{"md-icon":"done","md-label":"No transactions to reconcile","md-description":"New transactions you add will show up here."}})],1)},Yt=[];const Dt=n("d3c8");var $t={name:"TransactionList",props:{cleared:Array,uncleared:Array,settings:Object},components:{Currency:mt},data(){return{transactions:[],selected:[]}},watch:{selected(t){this.$emit("selected",t)},immediate:!0},created(){this.transactions=[...this.cleared,...this.uncleared],this.selected=[...this.cleared]},methods:{formatDate(t){const e=Dt.utils.convertFromISODateString(t),n={day:"numeric",month:"short",timeZone:"UTC"},a=new Intl.DateTimeFormat(b.getLocale(this.settings),n);return a.format(e)}}},Ft=$t,Vt=(n("abe0"),n("f19a"),Object(V["a"])(Ft,Rt,Yt,!1,null,"eb9f8cf8",null)),Ut=Vt.exports,zt={name:"Account",props:{store:Object,id:String},data(){return{initialBalance:null,currentBalance:null,selectedTransactions:[]}},computed:{account(){const{budget:t,tracking:e}=this.store.state.accounts,n=t.find(t=>t.id==this.id);return null!==n&&void 0!==n?n:e.find(t=>t.id==this.id)},transactions(){return this.account.transactions},submitting(){return this.store.state.reconciling},needsReconciliation(){return this.selectedTransactions.length>0||0!=this.reconciliationTransaction},serverBalance(){return this.account.cleared_balance},reconciliationTransaction(){return this.currentBalance-this.serverBalance},reconcileTooltip(){return this.needsReconciliation?"Reconcile on YNAB.":"Nothing to reconcile."},settings(){return this.store.state.settings},selectedUnclearedTransactions(){return this.selectedTransactions.filter(t=>"uncleared"==t.cleared)}},watch:{store:{handler(){this.initialBalance=this.serverBalance,this.currentBalance=this.initialBalance},deep:!0,immediate:!0}},components:{Currency:mt,TransactionList:Ut},methods:{reconcile:async function(){await this.store.reconcile(this.account,this.selectedTransactions,this.reconciliationTransaction),this.store.state.error||this.$router.push("/")},pluralize(t,e){return e>1?t+"s":t}}},Mt=zt,Ht=(n("a67d"),n("5316"),Object(V["a"])(Mt,Lt,Pt,!1,null,"bc0942b0",null)),Jt=Ht.exports,Wt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[t._m(0),t._m(1),e("md-button",{staticClass:"md-raised md-primary",nativeOn:{click:function(e){return t.$router.push("/login")}}},[t._v(" Back to Login ")]),t._m(2)],1)},qt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"header"},[e("p",{staticClass:"md-title md-primary"},[t._v("Privacy policy")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"details"},[e("p",{staticClass:"md-subheading"},[t._v(" This website is fully client-side. Once you connect to your YNAB account, an access token is stored securely in your browser for a short amount of time and your browser will communicate directly with the YNAB API servers using this token to get your budget information to display it to you, as well as to create or edit transactions to reconcile your accounts. Your budget data is not persisted in your browser either. You can revoke this token at any point before its expiration by going in your YNAB settings. ")]),e("p",{staticClass:"md-subheading"},[t._v(" Your data obtained through the YNAB API will not be passed to any third-party. ")])])},function(){var t=this,e=t._self._c;return e("span",[t._v(" View source on "),e("a",{staticClass:"md-accent",attrs:{href:"https://github.com/JesseEmond/reconcile-for-ynab"}},[t._v("GitHub")])])}],Gt={name:"Privacy"},Zt=Gt,Qt=(n("5782"),Object(V["a"])(Zt,Wt,qt,!1,null,"88fc1094",null)),Kt=Qt.exports;function Xt(t,e,n){D.isLoggedIn()?n("/"):n()}async function te(t,e,n,a){if(D.isLoggedIn()){const t=D.maybeFirstLoad();a&&await t,n()}else n("/login")}async function ee(t,e,n){return te(t,e,n,!0)}function ne(t,e,n){const a=Et.tryParseToken(t.path);a?(D.login(a),n("/")):n()}a["default"].use(H["a"]);const ae=[{path:"/",name:"Home",component:At,beforeEnter:te},{path:"/login",name:"Login",component:jt,beforeEnter:Xt},{path:"/privacy",name:"Privacy",component:Kt,beforeEnter:Xt},{path:"/account/:id",name:"Account",component:Jt,beforeEnter:ee,props:!0}],se=new H["a"]({routes:ae});se.beforeEach(ne);var re=se,ce=n("f174"),oe=n.n(ce);a["default"].config.productionTip=!1,a["default"].use(r.a),a["default"].use(oe.a),a["default"].use(ct["a"]),new a["default"]({router:re,render:t=>t(z)}).$mount("#app")},5782:function(t,e,n){"use strict";n("3e65")},"6b4b":function(t,e,n){},"8e87":function(t,e,n){"use strict";n("9cd4")},"8f45":function(t,e,n){"use strict";n("abc7")},"91c7":function(t,e,n){},9723:function(t,e,n){"use strict";n("91c7")},"9cd4":function(t,e,n){},a67d:function(t,e,n){"use strict";n("1c1e")},a6a5:function(t,e,n){"use strict";n("6b4b")},abc7:function(t,e,n){},abe0:function(t,e,n){"use strict";n("35d1")},adbb:function(t,e,n){"use strict";n("be3c")},b2f9:function(t,e,n){},be3c:function(t,e,n){},dba4:function(t,e,n){"use strict";n("3675")},ee08:function(t,e,n){"use strict";n("b2f9")},f19a:function(t,e,n){"use strict";n("2377")}});
//# sourceMappingURL=app.8cfe90a6.js.map